<h2>凹凸映射原理</h2>

<p>在上一章，我们知道了大脑通过明暗变化来感知物体的形状。那么问题来了：如果我们想让一面平整的墙看起来像砖墙一样凹凸不平，是不是必须真的建模出每一块砖的形状呢？</p>

<p>答案是：<strong>不需要！</strong>我们可以用光照来"骗"眼睛。</p>

<h3>🎮 动手试试：凹凸映射效果</h3>

<p>点击按钮切换"有/无凹凸映射"，观察同一个平面的视觉差异：</p>

<div class="interactive-demo" id="bump-demo" data-demo="bump">
  <canvas id="bumpCanvas" width="280" height="200"></canvas>
  <div class="demo-controls">
    <div class="button-row">
      <span class="button-label">映射：</span>
      <button class="bump-mode-btn" data-mode="flat">无凹凸</button>
      <button class="bump-mode-btn active" data-mode="bump">有凹凸</button>
    </div>
    <div class="button-row">
      <span class="button-label">图案：</span>
      <button class="bump-pattern-btn active" data-pattern="bricks">砖块</button>
      <button class="bump-pattern-btn" data-pattern="waves">波浪</button>
      <button class="bump-pattern-btn" data-pattern="dots">圆点</button>
    </div>
    <div class="control-group">
      <label>光源角度：<span id="bumpLightAngleValue">-45</span>°</label>
      <input type="range" id="bumpLightAngle" min="-180" max="180" value="-45">
    </div>
    <div class="control-group">
      <label>凹凸强度：<span id="bumpStrengthValue">0.5</span></label>
      <input type="range" id="bumpStrength" min="0" max="2" step="0.1" value="0.5">
    </div>
  </div>
</div>

<blockquote>
<p>💡 <strong>观察要点</strong>：</p>
<ul>
  <li>切换"无凹凸"时，表面完全平坦，没有立体感</li>
  <li>切换"有凹凸"时，砖缝、波浪、圆点都有了立体感</li>
  <li>拖动光源角度，观察明暗变化如何产生凹凸错觉</li>
  <li>调整凹凸强度，效果越强立体感越明显</li>
</ul>
</blockquote>

<h3>一个聪明的"骗术"</h3>

<p>既然大脑是通过明暗来判断凹凸的，那我们只要<strong>假装</strong>表面是凹凸的，计算出"如果真的凹凸会产生什么样的明暗"，然后把这个明暗画出来就行了！</p>

<blockquote>
<p>这就像是在一张白纸上画阴影，让它看起来像是有褶皱一样。纸还是平的，但眼睛被骗了。</p>
</blockquote>

<h3>凹凸映射的原理</h3>

<p>凹凸映射（Bump Mapping）的核心思想是：</p>

<ol>
  <li><strong>保持几何形状不变</strong>：物体表面还是平的</li>
  <li><strong>修改光照计算</strong>：假装表面是凹凸的来计算光照</li>
  <li><strong>产生视觉错觉</strong>：大脑看到明暗变化，以为表面真的凹凸</li>
</ol>

<h3>法线的"谎言"</h3>

<p>还记得光照是怎么计算的吗？关键是表面的<strong>法线</strong>（垂直于表面的方向）。</p>

<p>在凹凸映射中，我们不改变真实的表面，而是<strong>修改法线</strong>。上面的演示中：</p>

<ul>
  <li>"无凹凸"时，所有点的法线都指向同一方向（垂直向上）</li>
  <li>"有凹凸"时，法线根据"假装的高度变化"被扰动，产生不同的明暗</li>
</ul>

<h3>生活中的例子</h3>

<p>凹凸映射的原理在生活中也有体现：</p>

<ul>
  <li><strong>浮雕壁纸</strong>：平面的壁纸通过印刷阴影，看起来像有立体花纹</li>
  <li><strong>3D电影海报</strong>：平面印刷品通过光影效果产生立体感</li>
  <li><strong>化妆修容</strong>：通过深浅色的化妆品让脸部轮廓看起来更立体</li>
</ul>

<h3>凹凸映射的局限</h3>

<p>虽然凹凸映射很神奇，但它也有局限：</p>

<ul>
  <li><strong>边缘穿帮</strong>：从侧面看，物体的轮廓还是平的</li>
  <li><strong>没有真实遮挡</strong>：凸起的部分不会真的挡住凹下去的部分</li>
  <li><strong>没有真实阴影</strong>：凸起不会在凹处投下真实的阴影</li>
</ul>

<blockquote>
<p>就像化妆再好，从侧面看脸型还是原来的样子。</p>
</blockquote>

<h3>小结</h3>

<p>在这一章中，我们学到了：</p>

<ol>
  <li>凹凸映射通过修改光照计算来模拟凹凸效果</li>
  <li>它不改变真实的几何形状，只是"欺骗"眼睛</li>
  <li>核心原理是修改表面法线，让光照计算产生凹凸的明暗效果</li>
  <li>这种技术有局限性，但在大多数情况下效果很好</li>
</ol>

<p>在下一章，我们将学习<strong>素描的原理</strong>——理解为什么夹角越大，反射光越少，这是所有光照计算的基础！</p>
